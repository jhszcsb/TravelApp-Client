<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:c="http://java.sun.com/jstl/core">

<h:head>
    <title>Login</title>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="bootstrap.css" />
</h:head>
<h:body>

    <!-- todo: include navbar from a separate file -->

    <nav class="navbar navbar-default">
        <div class="container-fluid">
            <!-- Brand and toggle get grouped for better mobile display -->
            <div class="navbar-header">
                <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1" aria-expanded="false">
                    <span class="sr-only">Toggle navigation</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <a class="navbar-brand" href="main.xhtml">travelr</a>
            </div>

            <!-- Collect the nav links, forms, and other content for toggling -->
            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav">
                </ul>
                <ul class="nav navbar-nav navbar-right">
                    <li><a href="about.xhtml">About</a></li>
                </ul>
            </div><!-- /.navbar-collapse -->
        </div><!-- /.container-fluid -->
    </nav>

    <form name='f' action="j_spring_security_check" method='POST'>
        <h1>Log In</h1>
        <ui:fragment rendered="#{param.login_error == '1'}">
            <div id="login-error" class="alert alert-danger" role="alert" style="width: 30%">
                <!--<span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span>
                <span class="sr-only">Error:</span>-->
                Invalid email/password combination. Please try again.
            </div>
        </ui:fragment>
        <table>
            <tr>
                <td>User:</td>
                <td><input type='text' name='j_username' value='' /></td>
            </tr>
            <tr>
                <td>Password:</td>
                <td><input type='password' name='j_password' /></td>
            </tr>
            <tr>
                <td><input name="submit" type="submit" value="Log In" class="btn btn-default" /></td>
            </tr>
        </table>
        <!--
        <h:panelGrid id="loginPanel" columns="2">
            <h:outputLabel id="label_username" for="username" value="User Name"/>
            <h:inputText name="j_username" id="j_username" value="#{loginController.username}" class="form-control"/>
            <h:outputLabel id="label_password" for="password" value="Password"/>
            <h:inputSecret name="j_password" id="j_password" value="#{loginController.password}" feedback="false" class="form-control"/>
        </h:panelGrid>
        <h:commandButton id="loginButton" value="Log In" title="Log in" class="btn btn-default" />
        -->
    </form>

    <br/><br/><br/>

    <!-- todo: input validations -->
    <h:form id="registerForm">
        <h1>Register</h1>
        <h:messages infoClass="alert alert-info" warnClass="alert alert-warning" errorClass="alert alert-danger" style="width: 20%" />
        <h:panelGrid id="loginPanel" columns="2" style="width: 300px;">
            <h:outputLabel id="label_username" for="username" value="User Name"/>
            <h:inputText id="username" value="#{loginController.registerUsername}" class="form-control" required="true"
                         requiredMessage="User name cannot be empty!"/>
            <h:outputLabel id="label_firstname" for="firstname" value="First Name"/>
            <h:inputText id="firstname" value="#{loginController.registerFirstname}" class="form-control"/>
            <h:outputLabel id="label_lastname" for="lastname" value="Last Name"/>
            <h:inputText id="lastname" value="#{loginController.registerLastname}" class="form-control"/>
            <h:outputLabel id="label_email" for="email" value="E-mail"/>
            <h:inputText id="email" value="#{loginController.registerEmail}" class="form-control" required="true"
                         validatorMessage="Please enter a real e-mail address!"
                         requiredMessage="E-mail cannot be empty!">
                <f:validateLength maximum="40" />
                <f:validateRegex
                        pattern="^[_A-Za-z0-9-\+]+(\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\.[A-Za-z0-9]+)*(\.[A-Za-z]{2,})$" />
            </h:inputText>
            <h:outputLabel id="label_password" for="password" value="Password"/>
            <h:inputSecret id="password" value="#{loginController.registerPassword}" feedback="false" class="form-control" required="true"
                           requiredMessage="Password cannot be empty!"/>
        </h:panelGrid>
        <h:commandButton id="loginButton" value="Register" title="Register" action="#{loginController.register()}" class="btn btn-default"/>
    </h:form>

</h:body>
</html>